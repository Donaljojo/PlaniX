{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <h2>Analysis History — {{ project.name }}</h2>

    {% if analyses %}
        <ul class="list-group mt-3">
            {% for analysis in analyses %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    {{ analysis.created_at }}
                    <a href="{% url 'view_analysis' analysis.id %}" class="btn btn-primary btn-sm">
                        View
                    </a>
                    {% if analysis.risk_category == "High Risk" %}
    <span class="badge bg-danger">
        {{ analysis.risk_category }} — {{ analysis.security_score }}
    </span>
{% elif analysis.risk_category == "Medium Risk" %}
    <span class="badge bg-warning text-dark">
        {{ analysis.risk_category }} — {{ analysis.security_score }}
    </span>
{% else %}
    <span class="badge bg-success">
        {{ analysis.risk_category }} — {{ analysis.security_score }}
    </span>
{% endif %}

                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="mt-3 text-muted">No analyses found for this project.</p>
    {% endif %}

    <a href="{% url 'dashboard' %}" class="btn btn-secondary mt-3">Back</a>
</div>
{% endblock %}


